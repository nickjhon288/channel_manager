var base_url = document.getElementById('base_url').value;

var Login = function () {
	var r = function () {
		$(".login-form").validate({
			errorElement : "span",
			errorClass : "help-block",
			focusInvalid : !1,
			rules : {
				username : {
					required : !0
				},
				password : {
					required : !0
				},
				remember : {
					required : !1
				}
			},
			messages : {
				username : {
					required : "Username is required."
				},
				password : {
					required : "Password is required."
				}
			},
			invalidHandler : function (r, e) {
				$(".alert-danger", $(".login-form")).show()
			},
			highlight : function (r) {
				$(r).closest(".form-group").addClass("has-error")
			},
			success : function (r) {
				r.closest(".form-group").removeClass("has-error"),
				r.remove()
			},
			errorPlacement : function (r, e) {
				r.insertAfter(e.closest(".input-icon"))
			},
			submitHandler : function (r) {
				r.submit()
			}
		}),
		$(".login-form input").keypress(function (r) {
			return 13 == r.which ? ($(".login-form").validate().form() && $(".login-form").submit(), !1) : void 0
		}),
		$(".forget-form input").keypress(function (r) {
			return 13 == r.which ? ($(".forget-form").validate().form() && $(".forget-form").submit(), !1) : void 0
		}),
		$("#forget-password").click(function () {
			$(".login-form").hide(),
			$(".login-text").hide(),
			$(".forget-form").show()
		}),
		$("#back-btn").click(function () {
			$(".login-form").show(),
			$(".login-text").show(),
			$(".forget-form").hide(),
			$(".register-form").hide()
		}),
		$("#back_btn").click(function () {
			$(".login-form").show(),
			$(".login-text").show(),
			$(".register-form").hide()
		})
	},
	i = function () {
		function e(e) {
			if (!e.id)
				return e.text;
			var r = $('<span><img src="../assets/global/img/flags/' + e.element.value.toLowerCase() + '.png" class="img-flag" /> ' + e.text + "</span>");
			return r
		}
		jQuery().select2 && $("#country_list").size() > 0 && ($("#country_list").select2({
				placeholder : '<i class="fa fa-map-marker"></i>&nbsp;Select a Country',
				templateResult : e,
				templateSelection : e,
				width : "auto",
				escapeMarkup : function (e) {
					return e
				}
			}), $("#country_list").change(function () {
				$(".register-form").validate().element($(this))
			})),
		$(".register-form").validate({
			errorElement : "span",
			errorClass : "help-block",
			focusInvalid : !1,
			ignore : "",
			rules : {
				fullname : {
					required : !0
				},
				email : {
					required : !0,
					email : !0
				},
				address : {
					required : !0
				},
				city : {
					required : !0
				},
				country : {
					required : !0
				},
				username : {
					required : !0
				},
				password : {
					required : !0
				},
				rpassword : {
					equalTo : "#register_password"
				},
				tnc : {
					required : !0
				}
			},
			messages : {
				tnc : {
					required : "Please accept TNC first."
				}
			},
			invalidHandler : function (e, r) {},
			highlight : function (e) {
				$(e).closest(".form-group").addClass("has-error")
			},
			success : function (e) {
				e.closest(".form-group").removeClass("has-error"),
				e.remove()
			},
			errorPlacement : function (e, r) {
				"tnc" == r.attr("name") ? e.insertAfter($("#register_tnc_error")) : 1 === r.closest(".input-icon").size() ? e.insertAfter(r.closest(".input-icon")) : e.insertAfter(r)
			},
			submitHandler : function (e) {
				e.submit()
			}
		}),
		$(".register-form input").keypress(function (e) {
			return 13 == e.which ? ($(".register-form").validate().form() && $(".register-form").submit(), !1) : void 0
		}),
		jQuery("#register-btn").click(function () {
			jQuery(".login-form").hide(),
			jQuery(".login-text").hide(),
			jQuery(".register-form").show()
		}),
		jQuery("#register-back-btn").click(function () {
			jQuery(".login-form").show(),
			jQuery(".register-form").hide(),
			jQuery(".login-text").show()
		})
	};
	return {
		init : function () {
			r(),
			i(),
			e(),
			$(".login-bg").backstretch(["../assets/img/bg1.jpg", "../assets/img/bg2.jpg", "../assets/img/bg3.jpg"], {
				fade : 1e3,
				duration : 8e3
			}),
			$(".forget-form").hide()
		}
	}
}
();
jQuery(document).ready(function () {
	Login.init()
});
